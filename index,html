<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        body { margin: 0; background: #1a1a1a; overflow: hidden; display: flex; flex-direction: column; align-items: center; font-family: 'Courier New', monospace; color: #0f0; }
        canvas { background: #2d5a27; border: 8px solid #444; box-shadow: 0 0 20px #000; image-rendering: pixelated; margin-top: 10px; }
        .ui { margin: 10px; font-weight: bold; text-shadow: 2px 2px #000; letter-spacing: 2px; }
        .controls { display: grid; grid-template-columns: repeat(3, 70px); gap: 10px; margin-top: 15px; }
        button { width: 70px; height: 70px; font-size: 24px; background: #333; color: #fff; border: 3px solid #666; border-radius: 5px; touch-action: manipulation; }
        #overlay { position: absolute; top: 150px; text-align: center; background: rgba(0,0,0,0.9); padding: 20px; border: 4px solid #f00; display: none; z-index: 10; }
        
        /* Scrolling Banner Style */
        .banner-wrap { width: 320px; overflow: hidden; background: #000; border: 2px solid #444; margin-top: 10px; white-space: nowrap; }
        .banner-text { display: inline-block; padding-left: 100%; animation: scroll 10s linear infinite; font-size: 14px; color: #f90; font-weight: bold; }
        @keyframes scroll { 0% { transform: translate(0, 0); } 100% { transform: translate(-100%, 0); } }
    </style>
</head>
<body>
    <div class="ui">SCORE: <span id="score">0</span> | LIVES: <span id="lives">3</span></div>
    <canvas id="game"></canvas>
    
    <div class="banner-wrap">
        <div class="banner-text">HIGH SCORE: 00000 -- MADE BY WIL -- DOBER-FRISBEE 5200 EDITION</div>
    </div>

    <div id="overlay">
        <h1 style="color:#f00; font-size: 30px;">GAME OVER</h1>
        <button onclick="resetGame()" style="width:150px">RESTART</button>
    </div>

    <div class="controls">
        <div></div><button onclick="move('up')">▲</button><div></div>
        <button onclick="move('left')">◀</button><button onclick="move('down')">▼</button><button onclick="move('right')">▶</button>
    </div>

    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        canvas.width = 320; canvas.height = 320;
        let score = 0, speedMult = 1, lives = 3, gameOver = false;
        const grid = 32; const player = { x: 144, y: 288 }; const frisbee = { x: 144, y: 0 };
        let enemies = [], audioCtx, audioStarted = false;

        function drawDoberman(x, y) {
            ctx.fillStyle = "#000"; // Legs
            ctx.fillRect(x+6, y+24, 4, 6); ctx.fillRect(x+22, y+24, 4, 6);
            ctx.fillRect(x+4, y+10, 24, 14); // Body
            ctx.fillRect(x+18, y+2, 10, 10); // Head
            ctx.fillStyle = "#C64"; // Rust markings
            ctx.fillRect(x+6, y+12, 10, 8); ctx.fillRect(x+24, y+6, 6, 4);
            ctx.fillStyle = "#000"; // Natural Ears
            ctx.beginPath(); ctx.moveTo(x+18, y+2); ctx.lineTo(x+14, y-4); ctx.lineTo(x+22, y+2); ctx.fill();
            ctx.beginPath(); ctx.moveTo(x+28, y+2); ctx.lineTo(x+32, y-4); ctx.lineTo(x+24, y+2); ctx.fill();
        }

        function drawEnemyDog(e) {
            ctx.fillStyle = e.type === 'large' ? "#444" : "#852";
            ctx.fillRect(e.x, e.y + 10, e.w, e.h - 10);
            ctx.fillRect(e.x + (e.speed > 0 ? e.w-10 : 0), e.y, 10, 12);
        }

        function createEnemies() {
            enemies = [];
            for (let i = 1; i < 9; i++) {
                let type = Math.random();
                let speed = (Math.random() * 1.5 + 1) * (i % 2 === 0 ? 1 : -1) * speedMult;
                if (type > 0.8) enemies.push({ x: Math.random()*320, y: i*grid, speed: speed, type: 'large', w: 48, h: 28 });
                else if (type > 0.5) enemies.push({ x: Math.random()*320, y: i*grid, speed: speed, type: 'pack', count: Math.floor(Math.random()*3)+1, w: 24, h: 16 });
                else enemies.push({ x: Math.random()*320, y: i*grid, speed: speed, type: 'norm', w: 24, h: 18 });
            }
        }

        function move(dir) {
            if (gameOver) return;
            if (!audioStarted) startAudio();
            if (dir === 'up') player.y -= grid;
            if (dir === 'down' && player.y < 288) player.y += grid;
            if (dir === 'left' && player.x > 0) player.x -= grid;
            if (dir === 'right' && player.x < 288) player.x += grid;
        }

        function resetGame() {
            score = 0; speedMult = 1; lives = 3; gameOver = false;
            document.getElementById('score').innerText = score;
            document.getElementById('lives').innerText = lives;
            document.getElementById('overlay').style.display = 'none';
            player.x = 144; player.y = 288;
            createEnemies();
        }

        function startAudio() {
            audioStarted = true;
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            playAtariDub();
        }

        function playAtariDub() {
            if (gameOver) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'triangle';
            osc.frequency.setValueAtTime(55, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.4);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + 0.4);
            setTimeout(playAtariDub, 500);
        }

        function update() {
            if (gameOver) return;
            ctx.fillStyle = "#2d5a27";
            ctx.fillRect(0, 0, 320, 320);
            
            ctx.fillStyle = '#f90'; // Frisbee
            ctx.beginPath(); ctx.ellipse(frisbee.x + 16, frisbee.y + 16, 14, 7, 0, 0, Math.PI * 2); ctx.fill();

            drawDoberman(player.x, player.y);

            enemies.forEach(e => {
                e.x += e.speed;
                if (e.x > 340) e.x = -60; if (e.x < -60) e.x = 340;
                if (e.type === 'pack') {
                    for(let j=0; j < e.count; j++) {
                        let dogX = e.x + (j * 30);
                        drawEnemyDog({x: dogX, y: e.y, w: e.w, h: e.h, speed: e.speed});
                        if (player.x < dogX + e.w && player.x + 24 > dogX && player.y === e.y) handleHit();
                    }
                } else {
                    drawEnemyDog(e);
                    if (player.x < e.x + e.w && player.x + 24 > e.x && player.y === e.y) handleHit();
                }
            });

            if (player.y <= 0) {
                score++; speedMult += 0.1;
                document.getElementById('score').innerText = score;
                player.x = 144; player.y = 288;
                createEnemies();
            }
            requestAnimationFrame(update);
        }

        function handleHit() {
            lives--;
            document.getElementById('lives').innerText = lives;
            player.x = 144; player.y = 288;
            if (lives <= 0) {
                gameOver = true;
                document.getElementById('overlay').style.display = 'block';
            }
        }

        createEnemies();
        update();
    </script>
</body>
</html>
